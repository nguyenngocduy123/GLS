(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{PVOQ:function(e,t,i){"use strict";var n=i("UTJH"),s=i("mCK3"),a=i("IlA0"),r=i("K160"),o=i("Tjpy"),f=Object(o.a)(function(e,t){return null==e?{}:function(e,t){return function(e,t,i){for(var r=-1,o=t.length,f={};++r<o;){var c=t[r],b=Object(n.a)(e,c);i(0,c)&&Object(s.a)(f,Object(a.a)(c,e),b)}return f}(e,t,function(t,i){return Object(r.a)(e,i)})}(e,t)}),c=i("crfB"),b=i("cPJV"),l=i("sA4U"),d=i("GgTk");i.d(t,"a",function(){return h});var h=function(){function e(e,t){var i=this;this._dialogRef=e,this._data=t,this._preserveInitialRoutes=!1,this.vehicles=[],this.selectedVehicles=[],this.requiredVehicles=[],this.orders=[],this.selectedOrders=[],this.orderIdsInSol=[],this.title="Optimization",this.elements=[[]],this.form={},this.tableOrderActions=[{label:"Due Time Filter",menuTemplateRef:function(){return i._timeFilterMenu}}],this.selectedIndex=0,this.tableHeight=window.innerHeight-110}return e.prototype.ngOnInit=function(){var e=this;if(console.log("VrpOptimizationSettingsDialogComponent -> ngOnInit -> this._data",this._data),this.vehicleColumns=this._data.config.vehicleColumns||d.e.vehicles,this.orderColumns=this._data.config.orderColumns||d.c,this._optimizationConfig=this._data.config.optimizationConfig||d.b,this.orders=this._data.selectableOrders,this.vehicles=this._data.selectableVehicles,this._data.initialSol){var t=this._data.turnOverTime,i=this._data.initialSol;isNaN(t)?this._preserveInitialRoutes=!0:this.title="Optimization - Vehicle Start Time derived from Solution "+i.id;var n=[];i.routes.forEach(function(i){var s,a=e.vehicles.find(function(e){return e.id===i.vehicle_id});a&&(isNaN(t)||(a.earliest_start=b(c(i.end_time,t),"YYYY-MM-DDTHH:mm:ssZ")),n.push(a.id)),(s=e.orderIdsInSol).push.apply(s,i.act.map(function(e){return e.job_id}))}),this.orders=this._data.selectableOrders.filter(function(t){return!e.orderIdsInSol.includes(t.id)}),this._preserveInitialRoutes&&(this.requiredVehicles=this._data.selectableVehicles.filter(function(e){return n.includes(e.id)}))}this._selectAllOrdersAndVehicles(),this._initSettingsForm()},e.prototype.onResize=function(e){void 0===e&&(e=void 0),this.tableHeight=window.innerHeight-205},e.prototype.close=function(){var e=this,t=this._optimizationConfig.filter(function(t){return e.form[t.name]}),i=f(this.form,t.filter(function(e){return!e.isConstraint}).map(function(e){return e.name}));i.constraints=t.filter(function(e){return e.isConstraint}).map(function(e){return e.name}).join("_"),i.problem=this._createAbstractInstance(),this._preserveInitialRoutes&&(i.dynamicSettings="siwei"===i.engine?{initialSolIndex:0,mode:3}:{initialSolId:this._data.initialSol.id}),console.log("VrpOptimizationSettingsDialogComponent -> close -> options",i),this._dialogRef.close(i)},e.prototype.cancel=function(){this._dialogRef.close()},e.prototype.applyDueTimeFilter=function(e){this.selectedOrders=l.c.applyFilterToDateColumn(this.orders,"dueTime",e),this._orderTable.filter(this.selectedOrders),this.tableOrderActions[0].label="Filtered ("+e.start+" to  "+e.end+") "},e.prototype._selectAllOrdersAndVehicles=function(){this.selectedOrders=this.orders.slice(),this.selectedVehicles=this.vehicles.slice()},e.prototype._initSettingsForm=function(){var e=this,t=!(!this._data.initialSol&&!this._data.turnOverTime),i=[[]];if(this._optimizationConfig.forEach(function(n){var s=Object.assign({},n);if(!t||!s.hideForDynamic){e.form[s.name]=s.default;var a=n.rowIndex&&n.rowIndex>0?n.rowIndex:0;i[a]||(i[a]=[]),i[a].push(s)}}),!this.form.solutionId){var n=new Date;this.form.solutionId="s_"+n.YYMMDD()+"_"+n.HHmmss("")}this.elements=i},e.prototype._createAbstractInstance=function(){var e=this,t=this._data.problem,i=this.selectedOrders.map(function(e){return e.id}),n=this.selectedVehicles.map(function(e){return e.id}),s=Object.assign({vehicles:this.vehicles.filter(function(e){return n.includes(e.id)}),services:t.services.filter(function(e){return e&&i.includes(e.id)}),shipments:t.shipments.filter(function(e){return e&&i.includes(e.id)})},f(this._data.problem,["_id","coord_mode","fleet_size","items","username"])),a=s.vehicles.map(function(e){return e.type_id});if(s.vehicle_types=t.vehicle_types.filter(function(e){return a.includes(e.id)}),this._preserveInitialRoutes){s.solutions=[this._data.initialSol];var r=t.services.filter(function(t){return t&&e.orderIdsInSol.includes(t.id)}),o=t.shipments.filter(function(t){return t&&e.orderIdsInSol.includes(t.id)});s.services=s.services.concat(r),s.shipments=s.shipments.concat(o)}var c=[];return s.vehicles.concat(s.services,s.shipments).forEach(function(e){["start_address","end_address","address","pickup_address"].forEach(function(t){e[t]&&e[t].id&&c.push(e[t].id)})}),s.addresses=t.addresses.filter(function(e){return e&&c.includes(e.id)}),console.log("VrpOptimizationSettingsDialogComponent -> private_createAbstractInstance -> _p",s),s},e}()},Tjpy:function(e,t,i){"use strict";var n=i("uT1x"),s=function(e){return null!=e&&e.length?Object(n.a)(e,1):[]},a=i("UA7w"),r=i("xhnO");t.a=function(e){return Object(r.a)(Object(a.a)(e,void 0,s),e+"")}},YdAn:function(e,t,i){"use strict";i.r(t),i.d(t,"VrpBasicModuleNgFactory",function(){return Re});var n=i("CcnG"),s=i("6ACT"),a=i("Qm6G"),r=i("NcP4"),o=i("t68o"),f=i("xYTU"),c=i("zbXB"),b=i("CQVA"),l=i("pMnS"),d=i("fiJ/"),h=i("k10Q"),u=i("0G9l"),p=i("7jv/"),m=i("JsB9"),_=i("44rI"),v=i("MXbC"),g=i("O7jx"),O=i("/ll8"),I=i("Ip0R"),S=i("gIcY"),j=i("M2Lx"),C=i("Wf4p"),w=i("eDkP"),A=i("Fzqc"),y=i("v9Dh"),V=i("mVsa"),k=i("uGex"),T=i("4epT"),z=i("ZYjt"),x=i("o3x0"),D=i("dWZg"),R=i("jQLj"),Y=i("wmQ5"),F=i("4tE/"),M=i("+dGY"),H=i("GW0G"),N=i("r8Is"),q=i("ZYCi"),E=i("t/Na"),G=i("+gH2"),L=i("wm4d"),P=i("vARd"),B=i("A7o+"),U=i("giEZ"),X=i("q7FI"),Z=i("SN/6"),J=i("YXNw"),K=i("lf6A"),Q=i("/VYK"),W=i("seP3"),$=i("b716"),ee=i("YhbO"),te=i("4c35"),ie=i("jlZm"),ne=i("FVSy"),se=i("LC5p"),ae=i("0/Q6"),re=i("SMsm"),oe=i("lLAP"),fe=i("qAlS"),ce=i("UodH"),be=i("de3e"),le=i("kWGw"),de=i("Z+uX"),he=i("Blfk"),ue=i("8mMr"),pe=i("Lwpp"),me=i("La40"),_e=i("Nsh5"),ve=i("r43C"),ge=i("iLfO"),Oe=i("hjRe"),Ie=i("uK2o"),Se=i("bo59"),je=i("6q6f"),Ce=i("rxZL"),we=i("Ps+U"),Ae=i("GSLX"),ye=i("6w6d"),Ve=i("m5n6"),ke=i("hIJP"),Te=i("zrK0"),ze=i("36nB"),xe=i("qkDU"),De=i("x0yz"),Re=n.Ua(s.a,[],function(e){return n.eb([n.fb(512,n.k,n.Ha,[[8,[a.c,r.a,o.a,f.a,f.b,c.b,c.a,b.a,l.a,d.a,h.a,u.a,p.a,m.a,_.a,v.a,g.a,O.a]],[3,n.k],n.A]),n.fb(4608,I.o,I.n,[n.x,[2,I.C]]),n.fb(4608,S.C,S.C,[]),n.fb(4608,S.f,S.f,[]),n.fb(4608,j.c,j.c,[]),n.fb(4608,C.d,C.d,[]),n.fb(4608,w.c,w.c,[w.i,w.e,n.k,w.h,w.f,n.t,n.C,I.d,A.c]),n.fb(5120,w.j,w.k,[w.c]),n.fb(5120,y.b,y.c,[w.c]),n.fb(5120,V.b,V.g,[w.c]),n.fb(5120,k.a,k.b,[w.c]),n.fb(5120,T.b,T.a,[[3,T.b]]),n.fb(4608,z.f,C.e,[[2,C.i],[2,C.n]]),n.fb(5120,x.c,x.d,[w.c]),n.fb(4608,x.e,x.e,[w.c,n.t,[2,I.i],[2,x.b],x.c,[3,x.e],w.e]),n.fb(4608,C.c,C.A,[[2,C.h],D.a]),n.fb(4608,R.i,R.i,[]),n.fb(5120,R.a,R.b,[w.c]),n.fb(4608,Y.f,Y.f,[]),n.fb(5120,F.b,F.c,[w.c]),n.fb(5120,M.h,M.b,[[3,M.h],n.k,w.c,n.t]),n.fb(5120,M.i,M.c,[[3,M.i],M.h]),n.fb(5120,H.h,H.b,[[3,H.h]]),n.fb(4608,N.e,N.e,[q.o]),n.fb(4608,N.f,N.f,[]),n.fb(4608,E.j,E.p,[I.d,n.E,E.n]),n.fb(4608,E.q,E.q,[E.j,E.o]),n.fb(5120,E.a,function(e){return[e]},[E.q]),n.fb(4608,E.m,E.m,[]),n.fb(6144,E.k,null,[E.m]),n.fb(4608,E.i,E.i,[E.k]),n.fb(6144,E.b,null,[E.i]),n.fb(4608,E.g,E.l,[E.b,n.t]),n.fb(4608,E.c,E.c,[E.g]),n.fb(4608,G.a,G.a,[E.c,"MAP_BASE_URL"]),n.fb(4608,L.a,L.a,[x.e,P.b,B.k]),n.fb(4608,U.a,U.a,[x.e,P.b,B.k]),n.fb(4608,X.a,X.a,[]),n.fb(1073742336,I.c,I.c,[]),n.fb(1073742336,S.z,S.z,[]),n.fb(1073742336,S.l,S.l,[]),n.fb(1073742336,S.w,S.w,[]),n.fb(1073742336,B.h,B.h,[]),n.fb(1073742336,Z.a,Z.a,[]),n.fb(1073742336,J.a,J.a,[]),n.fb(1073742336,Z.g,Z.g,[]),n.fb(1073742336,K.b,K.b,[]),n.fb(1073742336,Z.j,Z.j,[]),n.fb(1073742336,Z.c,Z.c,[]),n.fb(1073742336,Z.f,Z.f,[]),n.fb(1073742336,D.b,D.b,[]),n.fb(1073742336,Q.c,Q.c,[]),n.fb(1073742336,j.d,j.d,[]),n.fb(1073742336,W.e,W.e,[]),n.fb(1073742336,$.c,$.c,[]),n.fb(1073742336,ee.c,ee.c,[]),n.fb(1073742336,te.g,te.g,[]),n.fb(1073742336,ie.b,ie.b,[]),n.fb(1073742336,A.a,A.a,[]),n.fb(1073742336,C.n,C.n,[[2,C.f]]),n.fb(1073742336,ne.d,ne.d,[]),n.fb(1073742336,C.p,C.p,[]),n.fb(1073742336,C.z,C.z,[]),n.fb(1073742336,C.x,C.x,[]),n.fb(1073742336,se.b,se.b,[]),n.fb(1073742336,ae.e,ae.e,[]),n.fb(1073742336,re.b,re.b,[]),n.fb(1073742336,oe.a,oe.a,[]),n.fb(1073742336,fe.b,fe.b,[]),n.fb(1073742336,w.g,w.g,[]),n.fb(1073742336,y.e,y.e,[]),n.fb(1073742336,ce.c,ce.c,[]),n.fb(1073742336,V.e,V.e,[]),n.fb(1073742336,C.u,C.u,[]),n.fb(1073742336,k.d,k.d,[]),n.fb(1073742336,T.c,T.c,[]),n.fb(1073742336,be.c,be.c,[]),n.fb(1073742336,le.c,le.c,[]),n.fb(1073742336,x.k,x.k,[]),n.fb(1073742336,de.c,de.c,[]),n.fb(1073742336,he.c,he.c,[]),n.fb(1073742336,P.e,P.e,[]),n.fb(1073742336,C.B,C.B,[]),n.fb(1073742336,C.r,C.r,[]),n.fb(1073742336,R.j,R.j,[]),n.fb(1073742336,ue.b,ue.b,[]),n.fb(1073742336,pe.d,pe.d,[]),n.fb(1073742336,Y.g,Y.g,[]),n.fb(1073742336,me.a,me.a,[]),n.fb(1073742336,_e.h,_e.h,[]),n.fb(1073742336,F.e,F.e,[]),n.fb(1073742336,ve.a,ve.a,[]),n.fb(1073742336,M.a,M.a,[]),n.fb(1073742336,ge.a,ge.a,[]),n.fb(1073742336,Oe.a,Oe.a,[]),n.fb(1073742336,Ie.a,Ie.a,[]),n.fb(1073742336,Se.a,Se.a,[]),n.fb(1073742336,H.a,H.a,[]),n.fb(1073742336,N.a,N.a,[]),n.fb(1073742336,je.a,je.a,[]),n.fb(1073742336,E.e,E.e,[]),n.fb(1073742336,E.d,E.d,[]),n.fb(1073742336,Ce.a,Ce.a,[]),n.fb(1073742336,we.a,we.a,[]),n.fb(1073742336,Ae.a,Ae.a,[]),n.fb(1073742336,q.r,q.r,[[2,q.y],[2,q.o]]),n.fb(1073742336,ye.a,ye.a,[]),n.fb(1073742336,Ve.a,Ve.a,[]),n.fb(1073742336,ke.a,ke.a,[]),n.fb(1073742336,Te.a,Te.a,[]),n.fb(1073742336,ze.b,ze.b,[]),n.fb(1073742336,xe.a,xe.a,[]),n.fb(1073742336,De.a,De.a,[]),n.fb(1073742336,s.a,s.a,[]),n.fb(256,C.g,C.k,[]),n.fb(256,E.n,"XSRF-TOKEN",[]),n.fb(256,E.o,"X-XSRF-TOKEN",[]),n.fb(1024,q.m,function(){return[[{path:"",redirectTo:"dashboard"},{path:"dashboard",loadChildren:"@app/vrp-basic/pages/dashboard/dashboard.module#VrpDashboardModule"},{path:"problem-detail",loadChildren:"@app/vrp-basic/pages/problem-detail/vrp-problem-detail.module#VrpProblemDetailModule"}]]},[])])})}}]);