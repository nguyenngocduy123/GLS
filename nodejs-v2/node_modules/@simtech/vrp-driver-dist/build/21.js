webpackJsonp([21],{440:function(n,l,t){"use strict";function e(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,17,"ion-card",[["full",""]],null,null,null,null,null)),a["ɵdid"](1,16384,null,0,j.a,[P.a,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](-1,null,["\n        "])),(n()(),a["ɵeld"](3,0,null,null,6,"ion-card-header",[["color","danger"],["text-wrap",""]],null,null,null,null,null)),a["ɵdid"](4,16384,null,0,I.a,[P.a,a.ElementRef,a.Renderer],{color:[0,"color"]},null),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵeld"](6,0,null,null,1,"ion-icon",[["item-start",""],["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a["ɵdid"](7,147456,null,0,O.a,[P.a,a.ElementRef,a.Renderer],{name:[0,"name"]},null),(n()(),a["ɵted"](8,null,[" ","\n        "])),a["ɵpid"](131072,J.j,[J.k,a.ChangeDetectorRef]),(n()(),a["ɵted"](-1,null,["\n\n        "])),(n()(),a["ɵeld"](11,0,null,null,5,"ion-card-content",[],null,null,null,null,null)),a["ɵdid"](12,16384,null,0,D.a,[P.a,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](13,null,["\n            ","."])),a["ɵpid"](131072,J.j,[J.k,a.ChangeDetectorRef]),(n()(),a["ɵeld"](15,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),a["ɵted"](16,null,["\n            Server Error: ","\n        "])),(n()(),a["ɵted"](-1,null,["\n    "]))],function(n,l){n(l,4,0,"danger");n(l,7,0,"warning")},function(n,l){var t=l.component;n(l,6,0,a["ɵnov"](l,7)._hidden);n(l,8,0,a["ɵunv"](l,8,0,a["ɵnov"](l,9).transform("Error")));n(l,13,0,a["ɵunv"](l,13,0,a["ɵnov"](l,14).transform("PAGE.OFFLINE_SYNC.RequestFail")));n(l,16,0,t.serverError)})}function u(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,15,"ion-card",[["full",""]],null,null,null,null,null)),a["ɵdid"](1,16384,null,0,j.a,[P.a,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](-1,null,["\n        "])),(n()(),a["ɵeld"](3,0,null,null,6,"ion-card-header",[["color","secondary"],["text-wrap",""]],null,null,null,null,null)),a["ɵdid"](4,16384,null,0,I.a,[P.a,a.ElementRef,a.Renderer],{color:[0,"color"]},null),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵeld"](6,0,null,null,1,"ion-icon",[["item-start",""],["name","thumbs-up"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a["ɵdid"](7,147456,null,0,O.a,[P.a,a.ElementRef,a.Renderer],{name:[0,"name"]},null),(n()(),a["ɵted"](8,null,["\n            ",".\n        "])),a["ɵpid"](131072,J.j,[J.k,a.ChangeDetectorRef]),(n()(),a["ɵted"](-1,null,["\n\n        "])),(n()(),a["ɵeld"](11,0,null,null,3,"ion-card-content",[],null,null,null,null,null)),a["ɵdid"](12,16384,null,0,D.a,[P.a,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](13,null,["\n            ",".\n        "])),a["ɵpid"](131072,J.j,[J.k,a.ChangeDetectorRef]),(n()(),a["ɵted"](-1,null,["\n    "]))],function(n,l){n(l,4,0,"secondary");n(l,7,0,"thumbs-up")},function(n,l){n(l,6,0,a["ɵnov"](l,7)._hidden);n(l,8,0,a["ɵunv"](l,8,0,a["ɵnov"](l,9).transform("Done")));n(l,13,0,a["ɵunv"](l,13,0,a["ɵnov"](l,14).transform("PAGE.OFFLINE_SYNC.RequestDone")))})}function o(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,11,"ion-row",[["class","row"],["tappable",""]],null,[[null,"tap"]],function(n,l,t){var e=!0;if("tap"===l){e=!1!==n.component.btnViewJob(n.context.$implicit)&&e}return e},null,null)),a["ɵdid"](1,16384,null,0,A.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵeld"](3,0,null,null,2,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),a["ɵdid"](4,16384,null,0,T.a,[],null,null),(n()(),a["ɵted"](5,null,["\n                ","\n            "])),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵeld"](7,0,null,null,3,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),a["ɵdid"](8,16384,null,0,T.a,[],null,null),(n()(),a["ɵted"](9,null,["\n                ","\n            "])),a["ɵppd"](10,2),(n()(),a["ɵted"](-1,null,["\n        "]))],null,function(n,l){n(l,5,0,l.context.$implicit.jobId);n(l,9,0,a["ɵunv"](l,9,0,n(l,10,0,a["ɵnov"](l.parent.parent,0),l.context.$implicit.deliveryTime,"short")))})}function r(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,25,"ion-grid",[["class","table grid"]],null,null,null,null,null)),a["ɵdid"](1,16384,null,0,_.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n        "])),(n()(),a["ɵeld"](3,0,null,null,18,"ion-row",[["class","row"]],null,null,null,null,null)),a["ɵdid"](4,16384,null,0,A.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵeld"](6,0,null,null,6,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),a["ɵdid"](7,16384,null,0,T.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n                "])),(n()(),a["ɵeld"](9,0,null,null,2,"strong",[],null,null,null,null,null)),(n()(),a["ɵted"](10,null,["",""])),a["ɵpid"](131072,J.j,[J.k,a.ChangeDetectorRef]),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵeld"](14,0,null,null,6,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),a["ɵdid"](15,16384,null,0,T.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n                "])),(n()(),a["ɵeld"](17,0,null,null,2,"strong",[],null,null,null,null,null)),(n()(),a["ɵted"](18,null,["",""])),a["ɵpid"](131072,J.j,[J.k,a.ChangeDetectorRef]),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵted"](-1,null,["\n        "])),(n()(),a["ɵted"](-1,null,["\n        "])),(n()(),a["ɵand"](16777216,null,null,1,null,o)),a["ɵdid"](24,802816,null,0,F.i,[a.ViewContainerRef,a.TemplateRef,a.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),a["ɵted"](-1,null,["\n    "]))],function(n,l){n(l,24,0,l.component.offlineJobs)},function(n,l){n(l,10,0,a["ɵunv"](l,10,0,a["ɵnov"](l,11).transform("ATTEMPTED_JOB.Id")));n(l,18,0,a["ɵunv"](l,18,0,a["ɵnov"](l,19).transform("ATTEMPTED_JOB.Time")))})}function i(n){return a["ɵvid"](0,[a["ɵpid"](0,F.d,[a.LOCALE_ID]),(n()(),a["ɵeld"](1,0,null,null,11,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,k.b,k.a)),a["ɵdid"](2,4374528,null,0,L.a,[P.a,V.a,x.a,a.ElementRef,a.Renderer,S.a,N.a,a.NgZone,[2,M.a],[2,B.a]],null,null),(n()(),a["ɵted"](-1,1,["\n    "])),(n()(),a["ɵand"](16777216,null,1,1,null,e)),a["ɵdid"](5,16384,null,0,F.j,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),a["ɵted"](-1,1,["\n\n    "])),(n()(),a["ɵand"](16777216,null,1,1,null,u)),a["ɵdid"](8,16384,null,0,F.j,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),a["ɵted"](-1,1,["\n\n    "])),(n()(),a["ɵand"](16777216,null,1,1,null,r)),a["ɵdid"](11,16384,null,0,F.j,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),a["ɵted"](-1,1,["\n"])),(n()(),a["ɵted"](-1,null,["\n\n"])),(n()(),a["ɵeld"](14,0,null,null,25,"ion-footer",[],null,null,null,null,null)),a["ɵdid"](15,16384,null,0,G.a,[P.a,a.ElementRef,a.Renderer,[2,M.a]],null,null),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵeld"](17,0,null,null,21,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),a["ɵdid"](18,16384,null,0,_.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n        "])),(n()(),a["ɵeld"](20,0,null,null,17,"ion-row",[["class","row"]],null,null,null,null,null)),a["ɵdid"](21,16384,null,0,A.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵeld"](23,0,null,null,13,"ion-col",[["class","col"],["col-12",""],["no-padding",""]],null,null,null,null,null)),a["ɵdid"](24,16384,null,0,T.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n                "])),(n()(),a["ɵeld"](26,0,null,null,9,"button",[["color","primary"],["full",""],["ion-button",""],["large",""],["no-margin",""]],[[8,"disabled",0]],[[null,"tap"]],function(n,l,t){var e=!0;if("tap"===l){e=!1!==n.component.btnSyncJobs()&&e}return e},Y.b,Y.a)),a["ɵdid"](27,1097728,null,0,q.a,[[8,""],P.a,a.ElementRef,a.Renderer],{color:[0,"color"],large:[1,"large"],full:[2,"full"]},null),(n()(),a["ɵted"](-1,0,["\n                    "])),(n()(),a["ɵeld"](29,0,null,0,5,"div",[],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n                        "])),(n()(),a["ɵeld"](31,0,null,null,1,"ion-icon",[["name","sync"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a["ɵdid"](32,147456,null,0,O.a,[P.a,a.ElementRef,a.Renderer],{name:[0,"name"]},null),(n()(),a["ɵted"](33,null,["\n                        ","\n                    "])),a["ɵpid"](131072,J.j,[J.k,a.ChangeDetectorRef]),(n()(),a["ɵted"](-1,0,["\n                "])),(n()(),a["ɵted"](-1,null,["\n            "])),(n()(),a["ɵted"](-1,null,["\n        "])),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵted"](-1,null,["\n"])),(n()(),a["ɵted"](-1,null,["\n"]))],function(n,l){var t=l.component;n(l,5,0,t.serverError);n(l,8,0,!t.offlineJobs.length);n(l,11,0,t.offlineJobs.length);n(l,27,0,"primary","","");n(l,32,0,"sync")},function(n,l){var t=l.component;n(l,1,0,a["ɵnov"](l,2).statusbarPadding,a["ɵnov"](l,2)._hasRefresher);n(l,26,0,!t.offlineJobs.length);n(l,31,0,a["ɵnov"](l,32)._hidden);n(l,33,0,a["ɵunv"](l,33,0,a["ɵnov"](l,34).transform("PAGE.OFFLINE_SYNC.BtnConfirm")))})}Object.defineProperty(l,"__esModule",{value:!0});var a=t(0),d=(t(2),t(24),t(101)),s=t(44),c=t(49),f=function(){function n(n,l,t,e){this.driver=n,this.loading=l,this.modalCtrl=t,this.notify=e,this.offlineJobs=[]}return n.prototype.ionViewWillLoad=function(){var n=this;this.driver.getOfflineJobs().then(function(l){return n.offlineJobs=l}).catch(function(l){return n.notify.error(l)})},n.prototype.btnViewJob=function(n){this.modalCtrl.create("OfflineJobModalPage",{job:n},{enableBackdropDismiss:!1}).present()},n.prototype.btnSyncJobs=function(){var n=this,l=this.loading.show();this.serverError=void 0,this.driver.uploadOfflineJobs().then(function(){n.offlineJobs=[],l.dismiss()}).catch(function(t){n.serverError=t||"Unknown",l.dismiss()})},n}(),h=t(443),p=function(){return function(){}}(),m=t(358),g=t(359),v=t(360),b=t(361),y=t(362),w=t(363),R=t(364),E=t(365),C=t(366),j=t(164),P=t(3),I=t(169),O=t(46),J=t(69),D=t(165),A=t(156),T=t(154),_=t(155),F=t(13),k=t(367),L=t(27),V=t(5),x=t(10),S=t(9),N=t(31),M=t(6),B=t(26),G=t(162),Y=t(45),q=t(23),$=t(105),W=a["ɵcrt"]({encapsulation:2,styles:[],data:{}}),H=a["ɵccf"]("page-offline-sync",f,function(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,1,"page-offline-sync",[],null,null,null,i,W)),a["ɵdid"](1,49152,null,0,f,[c.a,d.a,$.a,s.a],null,null)],null,null)},{},{},[]),U=t(21),Z=t(158),z=t(444),K=t(48);t.d(l,"OfflineSyncPageModuleNgFactory",function(){return Q});var Q=a["ɵcmf"](p,[],function(n){return a["ɵmod"]([a["ɵmpd"](512,a.ComponentFactoryResolver,a["ɵCodegenComponentFactoryResolver"],[[8,[m.a,g.a,v.a,b.a,y.a,w.a,R.a,E.a,C.a,H]],[3,a.ComponentFactoryResolver],a.NgModuleRef]),a["ɵmpd"](4608,F.l,F.k,[a.LOCALE_ID,[2,F.t]]),a["ɵmpd"](4608,U.t,U.t,[]),a["ɵmpd"](4608,U.d,U.d,[]),a["ɵmpd"](4608,J.g,J.f,[]),a["ɵmpd"](4608,J.c,J.e,[]),a["ɵmpd"](4608,J.i,J.d,[]),a["ɵmpd"](4608,J.b,J.a,[]),a["ɵmpd"](4608,J.k,J.k,[J.n,J.g,J.c,J.i,J.b,J.l,J.m]),a["ɵmpd"](512,F.b,F.b,[]),a["ɵmpd"](512,U.r,U.r,[]),a["ɵmpd"](512,U.j,U.j,[]),a["ɵmpd"](512,U.p,U.p,[]),a["ɵmpd"](512,Z.a,Z.a,[]),a["ɵmpd"](512,z.a,z.a,[]),a["ɵmpd"](512,J.h,J.h,[]),a["ɵmpd"](512,h.a,h.a,[]),a["ɵmpd"](512,Z.b,Z.b,[]),a["ɵmpd"](512,p,p,[]),a["ɵmpd"](256,J.m,void 0,[]),a["ɵmpd"](256,J.l,void 0,[]),a["ɵmpd"](256,K.a,f,[])])})},443:function(n,l,t){"use strict";t.d(l,"a",function(){return e});t(2),t(24),t(444),t(448),t(445),t(450),t(452),t(447),t(446),t(449),t(453);var e=function(){return function(){}}()},444:function(n,l,t){"use strict";t.d(l,"a",function(){return e});t(2),t(451);var e=function(){return function(){}}()},445:function(n,l,t){"use strict";t.d(l,"a",function(){return u});var e=t(2),u=(t(24),function(n){function l(l,t){var e=n.call(this,{navCtrl:t})||this;return e.alertCtrl=l,e.navCtrl=t,e.toLoginPage=!1,e.showDialog=!1,e}return Object(e.__extends)(l,n),l.prototype.goMainPage=function(){var n=this;if(!1===this.showDialog)this.go();else{this.alertCtrl.create({title:"Confirm",subTitle:"Are you sure you want to go main page?",buttons:[{text:"Cancel",role:"cancel"},{text:"Yes",handler:function(){n.go()}}]}).present()}},l.prototype.go=function(){!1===this.toLoginPage?this.goHomePage():this.goLoginPage()},l}(t(152).a))},446:function(n,l,t){"use strict";t.d(l,"a",function(){return u});t(2);var e=t(25),u=function(){function n(){}return n.prototype.ngOnChanges=function(){if(void 0===this.jobtype)throw new Error("Attribute `jobtype` is required.");var n=e.a.jobTypePair[this.jobtype];this.text=n.title,this.color=n.color},n}()},447:function(n,l,t){"use strict";t.d(l,"a",function(){return e});t(2);var e=function(){return function(){}}()},448:function(n,l,t){"use strict";t.d(l,"a",function(){return u});t(2);var e=t(0),u=(t(44),function(){function n(n){this.notify=n,this.pressed=new e.EventEmitter}return n.prototype.btnClear=function(){this.pressed.emit()},n.prototype.showToast=function(){this.notify.info("Press and hold to clear all input")},n}())},449:function(n,l,t){"use strict";t.d(l,"a",function(){return e});t(2),t(153);var e=function(){function n(n){this.photoViewer=n,this.photos=[],this.allowRemove=!1}return n.prototype.ngOnInit=function(){if(void 0===this.photos&&void 0===this.photo)throw new Error("Either `photos` or `photo` must be provided.");if(void 0!==this.photos&&!Array.isArray(this.photos))throw new Error("Attribute `photos` must be an array.");if(void 0!==this.photo&&"string"!=typeof this.photo)throw new Error("Attribute `photo` must be a string.")},n.prototype.btnViewPhoto=function(n){this.photoViewer.show(n)},n.prototype.btnRemovePhoto=function(n){var l=this.photos.indexOf(n,0);l>-1&&this.photos.splice(l,1)},n}()},450:function(n,l,t){"use strict";t.d(l,"a",function(){return u});t(2),t(24);var e=t(70),u=(t(101),function(){function n(n,l){this.loading=n,this.modalCtrl=l,this.showItems=!1}return n.prototype.ngOnInit=function(){if(void 0===this.job||!(this.job instanceof e.b))throw new Error("Attribute `job` must be an instance of Job.")},n.prototype.btnViewItem=function(n){var l=this.loading.show("Getting item information");this.modalCtrl.create("ItemDetailsPage",{deliveryItem:n}).present().then(function(){return l.dismiss()})},n}())},451:function(n,l,t){"use strict";t.d(l,"a",function(){return e});t(2);var e=function(){function n(){}return n.prototype.transform=function(n){return window.Ionic.WebView.convertFileSrc(n)},n}()},452:function(n,l,t){"use strict";t.d(l,"a",function(){return u});t(2);var e=t(70),u=function(){function n(){}return n.prototype.ngOnInit=function(){if(void 0===this.job||!(this.job instanceof e.b))throw new Error("Attribute `job` must be an instance of Job.")},n}()},453:function(n,l,t){"use strict";t.d(l,"a",function(){return o});t(2);var e=t(25),u=t(70),o=function(){function n(){this.showProgress=!1,this.summary=[],this.remainingPercent=100}return n.prototype.ngOnChanges=function(){if(void 0!==this.jobs&&this.jobs.length){if(!(this.jobs[0]instanceof u.b))throw new Error("Attribute `jobs` must be an array of Job instances.");this.reset();var n=this.groupBy(this.jobs,"Status");for(var l in n){var t=n[l],o=e.a.jobStatusPair[l];this.summary.push({title:o.title,color:o.color,count:t.length,percent:this.calPercent(t.length)})}}},n.prototype.toggleLegend=function(){this.showProgress=!this.showProgress},n.prototype.reset=function(){this.showProgress=!1,this.summary=[],this.remainingPercent=100},n.prototype.groupBy=function(n,l){return n.reduce(function(n,t,e,u,o){return void 0===o&&(o=t[l]),(n[o]||(n[o]=[])).push(t),n},{})},n.prototype.calPercent=function(n){var l=Math.ceil(n/this.jobs.length*100);return l<this.remainingPercent?(this.remainingPercent=this.remainingPercent-l,l):this.remainingPercent},n}()}});