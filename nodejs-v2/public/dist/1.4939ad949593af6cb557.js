(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{GgTk:function(e,t,i){"use strict";i.d(t,"f",function(){return a}),i.d(t,"d",function(){return r}),i.d(t,"a",function(){return d}),i.d(t,"e",function(){return s}),i.d(t,"c",function(){return o}),i.d(t,"b",function(){return l});var n=i("sA4U"),a=[{name:"name",label:"Name",type:"text",default:"Unknown"},{name:"fleet_size",label:"Fleet Size",type:"select",selections:["FINITE","INFINITE"],default:"FINITE",selectionLabels:["Finite","Infinite"]},{name:"coord_mode",label:"Coordinates Mode",type:"select",selections:["REAL","2D"],default:"REAL"}],r=[{name:"vehicles",label:"Vehicles",icon:"local_shipping"},{name:"vehicle_types",label:"Vehicle Types",icon:"removed_circle"},{name:"services",label:"Services",icon:"call_made"},{name:"shipments",label:"Shipments",icon:"import_export"},{name:"items",label:"Items",icon:"list"},{name:"addresses",label:"Addresses",icon:"list"}],d=[{name:"_id",label:"Id",width:250},{name:"name",label:"Name"},{name:"modified_date",label:"Updated",type:"timeAgo",width:180},{name:"fleet_size",label:"Fleet Size",type:"text",width:150},{name:"no_of_orders",label:"No.Orders",type:"number",width:120},{name:"no_of_solutions",label:"No.Solutions",type:"number",width:120},{name:"_itemActions",label:"",width:80,hiddenExcel:!0}],s=Object(n.e)({vehicles:[{name:"id",label:"ID",type:"text"},{name:"type_id",label:"Type",type:"select",source_data_id:"vehicle_types",width:120},{name:"earliest_start",label:"Start Time",type:"dateTime",width:150},{name:"latest_end",label:"End Time",type:"dateTime",width:150},{name:"break_time_windows",label:"Break Timewindow",type:"timeWindow",width:150,hidden:!0},{name:"break_duration",label:"Break Duration (m)",type:"number",scale:1/60,hidden:!0},{name:"start_address",label:"Start Address",type:"address",width:{min:100,max:400},rowIndex:1},{name:"end_address",label:"End Address",type:"address",width:{min:100,max:400},rowIndex:1},{name:"return_to_depot",label:"Return",type:"boolean",width:80,rowIndex:1},{name:"max_num_job",label:"Maximum Allowed Orders",type:"number",hidden:!0}],vehicle_types:[{name:"id",label:"ID",type:"text",width:120},{name:"capacity",label:"Capacity",type:"capacity",source_data_id:"items"},{name:"fixed_costs",label:"Fixed Cost ($/trip)",type:"number",rowIndex:1},{name:"time_dependent_costs",label:"Travel Time Cost ($/h)",type:"number",scale:3600,fraction:3,rowIndex:1},{name:"waiting_time_dependent_costs",label:"Waiting Time Cost ($/h)",type:"number",scale:3600,fraction:3,rowIndex:1},{name:"distance_dependent_costs",label:"Distance Cost ($/km)",type:"number",scale:1e3,fraction:3,rowIndex:2},{name:"perKmFrom20_30",label:"Distance Cost 20-29km",type:"number",scale:1e3,rowIndex:2,hidden:!0},{name:"perKmFrom30_50",label:"Distance Cost 30-49km",type:"number",scale:1e3,rowIndex:2,hidden:!0},{name:"perKmFrom50_80",label:"Distance Cost  50-80km",type:"number",scale:1e3,rowIndex:3,hidden:!0},{name:"perKmAbove_80",label:"Distance Cost Above 80km",type:"number",scale:1e3,rowIndex:3,hidden:!0},{name:"perDropFrom3_5",label:"Drop Cost 3-5point",type:"number",rowIndex:3,hidden:!0},{name:"perDropAbove5",label:"Drop Cost  Above 5point",type:"number",rowIndex:3,hidden:!0}],services:[{name:"id",label:"ID",type:"text",width:{min:100,max:200}},{name:"name",label:"Name",type:"text",width:{min:100,max:400}},{name:"size",label:"Demand",type:"array",source_data_id:"items"},{name:"type",label:"Type",type:"select",selections:["pickup","delivery"],selectionLabels:["Pickup","Delivery"]},{name:"address",label:"Address",type:"address"},{name:"service_setup_duration",label:"Setup Duration (m)",type:"number",fraction:1,scale:1/60,hidden:!0},{name:"service_duration",label:"Duration (m)",type:"number",fraction:1,scale:1/60},{name:"time_windows",label:"Timewindow",type:"timeWindow",rowIndex:1},{name:"allowed_vehicles",label:"Restriction",type:"array",hidden:!0},{name:"same_vehicle_tag",label:"SameVehicle",type:"text",width:120,rowIndex:3,hidden:!0},{name:"priority",label:"Priority",type:"number"}],shipments:[{name:"id",label:"ID",type:"text",width:{min:200,max:300}},{name:"name",label:"Name",type:"text",width:{min:200,max:300}},{name:"size",label:"Demand",type:"array",source_data_id:"items",width:120},{name:"pickup_address",label:"P-Address",type:"address",width:{min:200,max:300},rowIndex:1},{name:"pickup_waiting_duration",label:"P-Waiting (m)",type:"number",scale:1/60,fraction:1,width:140,rowIndex:1,hidden:!0},{name:"pickup_loading_duration",label:"P-Loading (m)",type:"number",scale:1/60,fraction:1,width:140,rowIndex:1,hidden:!0},{name:"pickup_duration",label:"P-Duration (m)",type:"number",scale:1/60,width:140,rowIndex:1,hidden:!0},{name:"pickup_time_windows",label:"P-Timewindow",type:"timeWindow",width:140,rowIndex:1},{name:"delivery_address",label:"D-Address",type:"address",width:{min:200,max:300},rowIndex:2},{name:"delivery_waiting_duration",label:"D-Waiting (m)",type:"number",scale:1/60,fraction:1,width:140,rowIndex:2,hidden:!0},{name:"delivery_loading_duration",label:"D-Loading (m)",type:"number",scale:1/60,fraction:1,width:140,rowIndex:2,hidden:!0},{name:"delivery_duration",label:"D-Duration (m)",type:"number",scale:1/60,width:140,rowIndex:2,hidden:!0},{name:"delivery_time_windows",label:"D-Timewindow",type:"timeWindow",width:140,rowIndex:2},{name:"allowed_vehicles",label:"Restriction",type:"array",width:120,rowIndex:3,hidden:!0},{name:"same_vehicle_tag",label:"SameVehicleTag",type:"text",width:120,rowIndex:3,hidden:!0},{name:"priority",label:"Priority",type:"number",width:80,rowIndex:3}],items:[{name:"id",label:"ID",type:"text"},{name:"weight",label:"Weight",type:"number"},{name:"description",label:"Description",type:"text"}],addresses:[{name:"id",label:"ID",type:"text"},{name:"name",label:"Name",type:"text"},{name:"postal",label:"Postal Code",type:"text"},{name:"full_address",label:"Full Address",type:"text"},{name:"lon",label:"Longitude (X)",type:"number",fraction:6},{name:"lat",label:"Latitude (Y)",type:"number",fraction:6},{name:"vehicle_restriction",label:"Vehicle Restriction",type:"text"}]}),o=Object(n.e)([{name:"id",label:"ID",type:"text"},{name:"name",label:"Customer",type:"text"},{name:"type",label:"Type",type:"text"},{name:"dueTime",label:"Due Time",type:"dateTime"}]),l=[{name:"solutionId",label:"Solution Id",type:"text"},{name:"engine",label:"Algorithm",type:"select",selectionLabels:["Memetic Algorithm","Hybrid Improvement"],selections:["siwei","chinh"],default:"chinh"},{name:"costModel",label:"Cost Model",type:"select",selectionLabels:["Default","Shanghai"],selections:["default","shanghai"],default:"default"},{name:"nThreads",label:"No. CPUs",type:"number",default:4,min:1,max:16},{name:"maxIterations",label:"Max. Iteration",type:"number",default:500,min:1,rowIndex:1},{name:"minJobPenalty",label:"*Min. Job Penalty",type:"number",default:.3,min:0,rowIndex:1},{name:"maxRunningTime",label:"Max. Time (minutes)",type:"number",default:5,min:1,rowIndex:1},{name:"enableMinJobPenalty",label:"*Enable assignment balancing (min job)",type:"checkbox",default:!1,rowIndex:6},{name:"sortByVehicleId",label:"*Sort solution by vehicle id",type:"checkbox",default:!1,rowIndex:6,hideForDynamic:!0},{name:"capacity",label:"Maximum Capacity Constraint",type:"checkbox",default:!0,rowIndex:2,isConstraint:!0},{name:"timeWindow",label:"Time-Window Constraint",type:"checkbox",default:!0,rowIndex:2,isConstraint:!0},{name:"vehicleBreak",label:"Vehicle Break Constraint",type:"checkbox",default:!0,rowIndex:3,isConstraint:!0},{name:"restrictJobsToSpecificVehicles",label:"Restrict jobs to specific vehicles",type:"checkbox",default:!0,rowIndex:3,isConstraint:!0},{name:"priorityJob",label:"Prioritize Jobs Constraint",type:"checkbox",default:!0,rowIndex:4,isConstraint:!0},{name:"completedBeforeDueTime",label:"Complete jobs before due time",type:"checkbox",default:!1,rowIndex:4,isConstraint:!0},{name:"sameVehicle",label:"*Same Vehicle Constraint",type:"checkbox",default:!1,rowIndex:5,isConstraint:!0},{name:"maxNumJob",label:"*Limit number of jobs per vehicle",type:"checkbox",default:!1,rowIndex:5,isConstraint:!1}]},fshX:function(e,t,i){"use strict";var n=i("IzLi"),a=i("G8aS"),r=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;t.a=function(e){var t=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(Object(a.a)(e))return NaN;if(Object(n.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(n.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var i=s.test(e);return i||o.test(e)?l(e.slice(2),i?2:8):d.test(e)?NaN:+e}(e))===1/0||e===-1/0?1.7976931348623157e308*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),i=t%1;return t==t?i?t-i:t:0}},uqu0:function(e,t,i){"use strict";var n=i("cPJV"),a=i("7EGn"),r=i("fywt"),d=i("5WsY"),s=i("mkut"),o=i("G3A0"),l=i("fshX"),c=Math.max,u=function(e){return function(e,t,i){var n=Object(e);if(!Object(d.a)(e)){var a=Object(r.a)(t,3);e=Object(s.a)(e),t=function(e){return a(n[e],e,n)}}var u=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var a=null==i?0:Object(l.a)(i);return a<0&&(a=c(n+a,0)),Object(o.a)(e,Object(r.a)(t,3),a)}(e,t,i);return u>-1?n[a?e[u]:u]:void 0}}(),m=i("jMTf"),p=i("YM6B"),b=i("8M4i"),f=i("/1FC"),h=i("EUcb"),_=i("FSIP"),y=Object(_.a)("length"),w=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),v="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",x="\\ud83c[\\udffb-\\udfff]",g="[^\\ud800-\\udfff]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",I="[\\ud800-\\udbff][\\udc00-\\udfff]",O="(?:"+v+"|"+x+")?",T="[\\ufe0e\\ufe0f]?"+O+"(?:\\u200d(?:"+[g,j,I].join("|")+")[\\ufe0e\\ufe0f]?"+O+")*",D=RegExp(x+"(?="+x+")|(?:"+[g+v+"?",v,j,I,"[\\ud800-\\udfff]"].join("|")+")"+T,"g"),A=function(e){if(null==e)return 0;if(Object(d.a)(e))return"string"==typeof(i=e)||!Object(f.a)(i)&&Object(h.a)(i)&&"[object String]"==Object(b.a)(i)?function(e){return w.test(e)}(t=e)?function(e){for(var t=D.lastIndex=0;D.test(e);)++t;return t}(t):y(t):e.length;var t,i,n=Object(p.a)(e);return"[object Map]"==n||"[object Set]"==n?e.size:Object(m.a)(e).length},S=i("qAkX"),k=i("9f76"),C=i("WOAq"),N=i("pyRK"),V=i("oYcn"),F=Object.prototype.hasOwnProperty,E=function(e){if(null==e)return!0;if(Object(d.a)(e)&&(Object(f.a)(e)||"string"==typeof e||"function"==typeof e.splice||Object(C.a)(e)||Object(V.a)(e)||Object(k.a)(e)))return!e.length;var t=Object(p.a)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Object(N.a)(e))return!Object(m.a)(e).length;for(var i in e)if(F.call(e,i))return!1;return!0},M=function(e){return"number"==typeof e||Object(h.a)(e)&&"[object Number]"==Object(b.a)(e)},P=i("sA4U");i.d(t,"a",function(){return R});var R=function(){function e(e){if(void 0===e&&(e=void 0),this.name="Untitled",this.fleet_size="FINITE",this.coord_mode="REAL",this.vehicles=[],this.vehicle_types=[],this.addresses=[],this.items=[],this.services=[],this.shipments=[],this.solutions=[],e){var t=JSON.stringify(e).replace(/time_window"/g,'time_windows"');Object.assign(this,JSON.parse(t))}}return e.toDate=function(e){return e instanceof Date?e:new Date(e)},e.toDateString2=function(t){return n(e.toDate(t),"MM/DD/YY HH:mm")},e.toDateStringHHmm=function(t){return n(e.toDate(t),"HH:mm")},e.createNewAddress=function(e){return void 0===e&&(e=void 0),Object.assign({id:"Loc_",name:"",full_address:"",postal:"",lon:0,lat:0},e)},e.createNewShipment=function(t){return Object.assign({id:"A",name:"",pickup_address:e.createNewAddress(),pickup_duration:0,pickup_time_windows:[{start:0,end:1e6}],delivery_address:e.createNewAddress(),delivery_time_windows:[{start:0,end:1e6}],delivery_duration:0,size:[]},t)},e.createNewService=function(t){return Object.assign({id:"A",name:"",service_duration:0,address:e.createNewAddress(),type:"delivery",time_windows:[{start:0,end:1e6}],size:[]},t)},e.createNewVehicle=function(t){return Object.assign({id:"0",type_id:"A",start_address:e.createNewAddress(),end_address:e.createNewAddress(),return_to_depot:!0,earliest_start:0,latest_end:1e6},t)},e.createNewVehicleType=function(e){return Object.assign({id:"A",capacity:[100],fixed_costs:0,distance_dependent_costs:1,time_dependent_costs:0},e)},e.prototype._get=function(e,t){return this[e]?this[e].find(function(e){return e.id===t}):void 0},e.prototype.getVehicle=function(e){return u(this.vehicles,{id:e})},e.prototype.getItem=function(e){return u(this.items,{id:e})},e.prototype.getJob=function(e){return u(this.services,{id:e})||u(this.shipments,{id:e})},e.prototype.getService=function(e){return u(this.services,{id:e})},e.prototype.getShipment=function(e){return u(this.shipments,{id:e})},e.prototype.getAddress=function(e){return u(this.addresses,{id:e})},e.prototype.getAddressNameFromId=function(e){var t=this.getAddress(e);if(t)return Object(a.a)(t,"name")||t.id},e.prototype.getAddressIds=function(){return this.addresses.map(function(e){return e.id})},e.prototype.getAddressNames=function(){return this.addresses.map(function(e){return e.name})},e.prototype.getActAddress=function(e){if("depart"===e.type||"return"===e.type)return this.getAddress(e.address.id);var t=this.getService(e.job_id);return t?this.getAddress(t.address.id):(t=this.getShipment(e.job_id))?e.type.indexOf("pickup")>=0?this.getAddress(t.pickup_address.id):this.getAddress(t.delivery_address.id):void 0},e.prototype.getActServiceDuration=function(e){if("depart"===e.type||"return"===e.type)return 0;var t=this.getService(e.job_id);return t?parseFloat(t.service_duration):(t=this.getShipment(e.job_id),parseFloat(Object(a.a)(t,e.type+"_duration")))},e.prototype.getActTimeWindow=function(e,t){if("depart"===e.type||"return"===e.type){var i=this.getVehicle(t);return{start:i.earliest_start,end:i.latest_end}}var n=this.getService(e.job_id);return n?Object(a.a)(n,"time_window"):(n=this.getShipment(e.job_id),Object(a.a)(n,e.type+"_time_window"))},e.prototype.getTotalNumberOfOrders=function(){return A(this.shipments)+A(this.services)},e.prototype.getReturnToDepotAct=function(e){var t=u(e.act,{type:"return"});if(t)return t;var i=this.getVehicle(e.vehicle_id);if(Object(a.a)(i,"return_to_depot")&&Object(a.a)(i,"end_address.id")){var n=Object(S.a)(e.act);return{type:"return",last_distance:e.distance-n.distance,arr_time:e.end_time,end_time:e.end_time}}},e.prototype.getTimeWindow=function(e){var t=this.getService(e.job_id);return t?t.time_windows:(t=this.getShipment(e.job_id))?e.type.indexOf("pickup")>=0?t.pickup_time_windows:t.delivery_time_windows:""},e.prototype.readFromAddresses=function(){var e=this;function t(t,i){if(!E(t)&&t[i]&&t[i].id){var n=t[i].id,a=e.addresses.find(function(e){return e.id===n});a?(t[i]=a,["address","delivery_address"].includes(i)&&a.vehicle_restriction&&(t.allowed_vehicles=a.vehicle_restriction)):(P.c.isValidSingaporePostal(n)&&!t[i].postal&&(t[i].postal=n),e.addresses.push(t[i]))}}this.vehicles.forEach(function(e){t(e,"start_address"),t(e,"end_address")}),this.shipments.forEach(function(e){t(e,"pickup_address"),t(e,"delivery_address")}),this.services.forEach(function(e){t(e,"address")})},e.prototype.getValidationStatus=function(){var e=this.validation;if("2D"===this.coord_mode)return"Valid";if(!e)return"Model not yet validated";if(0===e.n_invalid_shipments&&0===e.n_invalid_services&&0===e.n_invalid_vehicles)return"Valid";var t="There are ";return e.n_invalid_vehicles>0&&(t+=" "+e.n_invalid_vehicles+" invalid vehicles,"),e.n_invalid_services>0&&(t+=" "+e.n_invalid_services+" invalid services,"),e.n_invalid_shipments>0&&(t+=" "+e.n_invalid_shipments+" invalid shipments"),t},e.prototype.exportRouteToCSV=function(t,i){function n(t){return t?M(t)?e.toDateString2(new Date(1e3*t)):e.toDateString2(t):""}var r=this,d=r.getVehicle(t.vehicle_id),s=[];if(i){var o=r.items.map(function(e){return e.id+" ("+e.description+")"});s.push(["Vehicle Id","Job Id","Type","Arrival Time","Leave Time","Distance (km)","Free Time (min)","Priority","LocationId","Time Windows"].concat(o))}if(d)try{var l=r.getAddress(d.start_address.id)||d.start_address;return console.log("exportRouteToCSV -> startAddress",l,d),s.push([d.id,void 0,"Depart",void 0,n(t.start_time),0,void 0,void 0,l.full_address||l.postal||l.id,n(d.earliest_start),,,]),t.act.forEach(function(e,i){var o=r.getJob(e.job_id),l=r.getTimeWindow(e),c=(l=Array.isArray(l)?l:[l]).map(function(e){return"["+n(e.start)+","+n(e.end)+"]"}).join(";"),u=e.last_distance;i===t.act.length-1&&d.return_to_depot&&(u=t.distance-e.distance);var m=r.getActAddress(e),p=m?m.full_address||m.postal||m.id:"",b=r.items.map(function(e,t){return Object(a.a)(o,"size["+t+"]")});s.push([d.id,e.job_id,e.type,n(e.arr_time),n(e.end_time),(u/1e3).toFixed(1),(e.waiting_time/60).toFixed(1),Object(a.a)(o,"priority"),p,c].concat(b))}),d.return_to_depot&&s.push([d.id,void 0,"Return",n(t.end_time),void 0,void 0,void 0,void 0,r.getAddressNameFromId(d.end_address.id),void 0,n(d.latest_end)]),s}catch(e){console.error(e)}else alert("Vehicle "+t.vehicle_id+" not found")},e.prototype.exportAllRoutesToCSV=function(e){var t=this,i=[];return e.forEach(function(e,n){var a=t.exportRouteToCSV(e,0===n);i=i.concat(a)}),i},e.prototype.exportSolSummaryToCSV=function(t){var i=this;function n(t){return t?M(t)?e.toDateString2(new Date(1e3*t)):e.toDateString2(t):""}var r=this,d=[["Solution Id",t.id],["Total Cost ($)",t.costs.toFixed(1)],["Total Distance (km)",(t.distance/1e3).toFixed(1)],["Total Time (hours)",t.time/3600],["Total Transport Time (hours)",null!==t.transport_time?(t.transport_time/3600).toFixed(1):"unknown"],["Total Service Time (hours)",null!==t.service_time?(t.service_time/3600).toFixed(1):"unknown"],["Total Free Time (hours)",null!==t.waiting_time?(t.waiting_time/3600).toFixed(1):"unknown"],["Number of routes",t.no_routes],["Number of deliveries",Object(a.a)(t,"no_deliveries","unknown")],["Number of pickups",Object(a.a)(t,"no_pickups","unknown")],["Number of unassigned jobs",Object(a.a)(t,"no_unassigned_jobs",0)],["Unassigned jobs' IDs",(t.unassigned_jobs||[]).join("; ")],["Number of ignored jobs",t.no_ignored_jobs||0],["Ignored jobs' IDs",t.ignored_jobs&&t.ignored_jobs.join("; ")],[],[]];return t.routes.forEach(function(e,t){if(0===t){var s=r.items.map(function(e){return"Max "+e.id+" ("+e.description+")"});d.push(["Vehicle Id","Vehicle Type","Distance (km)","Start","End","Fix Cost","Variable Cost"].concat(s))}var o=i.getVehicle(e.vehicle_id),l=r.items.map(function(t,i){return Object(a.a)(e,"max_load["+i+"]")});d.push([e.vehicle_id,o&&o.type_id,e.distance/1e3,n(e.start_time),n(e.end_time),e.fixed_costs,e.variable_costs].concat(l))}),d},e}()}}]);