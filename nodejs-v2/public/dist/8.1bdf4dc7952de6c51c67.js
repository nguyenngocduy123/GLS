(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{MNZv:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return l});var i=function(){function t(){}return t.prototype.transform=function(t,e){return(t/1e3).toFixed(1)+" km"},t}(),l=function(){function t(){}return t.prototype.transform=function(t,e,n,i){return void 0===e&&(e=25),void 0===n&&(n=!1),void 0===i&&(i="..."),t.length>e?(n&&(e=t.substr(0,e).lastIndexOf(" ")),""+t.substr(0,e)+i):t},t}()},OcP3:function(t,e,n){"use strict";var i=n("CcnG"),l=(n("sA4U"),n("bTcF")),o=n("cPJV"),r=n("Olm7"),u=n("2WpN"),s=n("buEt"),a=(n("uqu0"),n("mrSG")),c=function(t){function e(e,n){void 0===n&&(n=void 0);var i=t.call(this,[0,0],{riseOnHover:!0})||this;i.timeWindow={start:void 0,end:void 0},i.arrivalTime={start:void 0,end:void 0},i.jobProb=n?"shipment":"service",i.jobType=n||e.type,i.tags=e,i.id=i.tags.id+"_"+i.jobType,i._setTooltip();try{var l=i.getAddress();l&&i.setLatLng([l.lat,l.lon||l.lng])}catch(t){console.error("VrpBasicJobMarker - invalid address",e)}return i.on("add",function(t){try{i.updateMarker()}catch(t){console.error("VrpBasicJobMarker",t)}}),i}return Object(a.__extends)(e,t),e.prototype.toString=function(){return this.jobType.toUpperCase()+" - #"+this.tags.id+" -  "+this._getTimeWindowStr(this.arrivalTime)},e.prototype.updateMarker=function(){var t=this;this.normalIcon=function(e){return void 0===e&&(e=void 0),e?l.a.createHtmlMarkerIcon(e,"red",40):l.a.createHtmlMarkerIcon(e,t.routeId?"blue":"grey",20)},this.bindPopup(this._getHtmlPopupContent()),this.setNormalIcon()},e.prototype.getTimeWindow=function(){return this.tags.time_windows||("pickup"===this.jobType?this.tags.pickup_time_windows:this.tags.delivery_time_windows)},e.prototype.getAddress=function(){return this.tags.address||("pickup"===this.jobType?this.tags.pickup_address:this.tags.delivery_address)},e.prototype.getTextAddress=function(){var t=this.getAddress();return""+(t.full_address||t.address)},e.prototype.isUnassignedJob=function(){return!this.routeId},e.prototype.isSelectedSolutionJob=function(t){return t===this.solutionId},e.prototype.isLatLngValid=function(){return!!this.getLatLng()},e.prototype._setTooltip=function(){this.tooltip="Order Id: "+this.tags.id},e.prototype._getTimeWindowStr=function(t,e){return void 0===e&&(e="HH:mm"),t?Array.isArray(t)?t.map(function(t){return"["+o(t.start,e)+","+o(t.end,e)+"]"}).join(";"):"["+o(t.start,e)+","+o(t.end,e)+"]":""},e.prototype._getHtmlPopupContent=function(){var t=this.tags,e=this.getTimeWindow(),n=this.getAddress();return[{label:"Order Id",value:t.id},{label:"Order Name",value:t.name||"N.A."},{label:"Job Type",value:this.jobType.toUpperCase()+" ("+this.jobProb.toUpperCase()+")"},{label:"Address",value:this.getTextAddress()},{label:"Postal",value:n.postal},{label:"Time Window",value:""+this._getTimeWindowStr(e)},{label:"Assigned To",value:""+(this.routeId||"N.A.")}].map(function(t){return"<span class='popupMsgLine'><b>"+t.label+":</b> "+t.value+" </span>"}).join("<br>")+"<br><b>Coordinates:</b> "+this.getLatLng().lat.toFixed(3)+","+this.getLatLng().lng.toFixed(3)},e}(l.b),d=n("6tJI"),p=n("vsvT"),h=(n("giEZ"),n("RusP"),n("PVOQ"));n("D8hx"),n.d(e,"a",function(){return m});var m=function(){function t(t,e,n,l,o,r,u,s){var a=this;this._dialog=t,this._route=e,this._router=n,this._excel=l,this._file=o,this._problemRest=r,this._socket=u,this._toast=s,this.legends=[{className:"blank-marker-icon station",checked:!0,disabled:!1,text:"Stations",toggle:function(){return a._visualizeVehicles()}},{className:"blank-marker-icon blue",checked:!0,disabled:!1,text:"Assigned Jobs",toggle:function(){return a._visualizeAssignedJobs()}},{className:"blank-marker-icon grey",checked:!0,disabled:!1,text:"Unassigned Jobs",toggle:function(){return a._visualizeUnassignedJobs()}}],this.onCreateSolutionWithInitial=new i.n,this.onCreateSolutionWithTurnOver=new i.n,this.onSolutionsChanged=new i.n,this.onSolutionOpened=new i.n,this.onOptimizationEnd=new i.n,this.onJobDetailsOpened=new i.n,this.solIndex=-1,this.routeIndex=-1,this.navData=[],this.solutionListSettings={title:"Solutions",numbering:!1,selected:[],dense:!1,filter:function(t,e){return(""+e.id).search(new RegExp(t,"i"))>-1},itemTemplateRef:function(){return a.solutionItemTemplate},headerMenuActions:[{label:"Import from JSON",click:function(){return a._importSolution("json")}},{label:"Delete Selected Solution",click:function(){return a._deleteSelectedSol()}}],itemMenuActions:[{label:"Open",click:function(t){return a.changeQueryParams({solutionIndex:a.problem.solutions.indexOf(t)})}},{label:"Delete",click:function(t){return a._deleteItems([t])}},{label:"Rename",click:function(t){return a._renameSolution(t)}},{label:"Reoptimize (preserve routes)",click:function(t){return a.onCreateSolutionWithInitial.emit(t)}},{label:"Reoptimize (add turnover duration)",click:function(t){return a.onCreateSolutionWithTurnOver.emit(t)}},{label:"Export to JSON",click:function(t){return a._exportSolution(t,"json")}},{label:"Export to Excel",click:function(t){return a._exportSolution(t,"xlsx")}}]},this.routeListSettings={title:"Routes",numbering:!1,selected:[],dense:!1,summaryText:void 0,headerActions:[{label:"Go back",icon:"arrow_back",click:function(){return a.changeQueryParams({solutionIndex:-1})}}],filter:function(t,e){return(e.tags.vehicle_id+e.tags.driver_name||"").search(new RegExp(t,"i"))>-1},itemTemplateRef:function(){return a.routeItemTemplate},itemMenuActions:[{label:"Open",click:function(t,e){return a.changeQueryParams({routeIndex:e})}},{label:"Delete",click:function(t){return a._deleteItems([t])}}],itemClick:function(t){t.checked&&t.highlight()},itemSelect:function(t,e){return a.onRouteSelected(t,e)}},this.actListSettings={title:"Activities",numbering:!0,summaryText:void 0,headerActions:[{label:"Go back",icon:"arrow_back",click:function(){return a.changeQueryParams({routeIndex:-1})}}],filter:function(t,e){return(""+e.tags.id).search(new RegExp(t,"i"))>-1},itemTemplateRef:function(){return a.actItemTemplate},itemClick:function(t){return t.openPopup()}},this.navSettings=this.solutionListSettings}return t.prototype.ngOnInit=function(){var t=this;this._route.queryParams.subscribe(function(e){e.solutionIndex&&(t.solIndex=e.solutionIndex),e.routeIndex&&(t.routeIndex=e.routeIndex),t.openSolution()})},t.prototype.ngAfterViewInit=function(){this.load()},t.prototype.ngOnChanges=function(t){t.problem&&!t.problem.firstChange&&this.load()},t.prototype.changeQueryParams=function(t){this._router.navigate([],{queryParamsHandling:"merge",queryParams:t})},t.prototype.load=function(){this.vrpLeaflet&&this.vrpLeaflet.isInitialized&&(this.renderProblem(),this.openSolution(),this.vrpLeaflet.invalidateSize().fitBounds())},t.prototype.renderProblem=function(){var t=this;this.problem&&(console.log("VrpSolutionDetailComponent -> renderProblem -> this.problem",this.problem),this.problem.services.length+this.problem.shipments.length>1e3&&(this.vrpLeaflet.clusteringMode=!0),this.vrpLeaflet.remove(),this.problem.services.forEach(function(e,n){try{var i=new c(e);i.isLatLngValid()&&t.vrpLeaflet.add(i)}catch(t){console.error(t)}}),console.log(this.vrpLeaflet.select()),this.problem.shipments.forEach(function(e){try{var n=new c(e,"pickup");t.vrpLeaflet.add(n);var i=new c(e,"delivery");t.vrpLeaflet.add(i)}catch(t){console.error(t)}}),this.problem.solutions.forEach(function(t){return t.checked=!1}),this._visualizeUnassignedJobs())},t.prototype._createRoute=function(t,e){var n=this,i=t.act.map(function(t){return"pickupShipment"===t.type?t.type="pickup":"deliverShipment"===t.type&&(t.type="delivery"),t}).filter(function(t){return["pickup","delivery"].includes(t.type)}).map(function(t){var i=n.vrpLeaflet.get(t.job_id+"_"+t.type);return i?(i.arrivalTime={start:t.arr_time,end:t.end_time},i.routeId=e,i.solutionId=n.mSolution.id,i.updateMarker()):console.warn(" VrpSolutionDetailComponent -> createRoute -> Cant find markers on map for act",t),i}).filter(function(t){return t}),o=l.a.getRandomColor(),r=this.problem.vehicles.find(function(e){return e.id===t.vehicle_id});t.driver_name=r.driver_name,t.max_num_job=r.max_num_job;var u=this.problem.vehicle_types.find(function(t){return t.id===r.type_id});t.vehicle_capacity=u.capacity;var s,a=new p.a(e,o,{address:r.start_address});r.return_to_depot&&r.end_address&&(s=new p.a(e,o,{address:r.end_address}));var c=new d.a(e||t.id,a,i,s,o,t);return c.checked=!0,this.vrpLeaflet.add([a,c]),c},t.prototype._removeAllRoutes=function(){this.mRoutes&&(this.mRoutes.forEach(function(t){t.vehicleMarker&&(t.vehicleMarker.routeId=void 0),t.markers&&t.markers.forEach(function(t){t.arrivalTime=void 0,t.routeId=void 0,t.updateMarker()})}),this.vrpLeaflet.remove(function(t){return t instanceof d.a||t instanceof p.a}))},t.prototype.openSolution=function(){var t=this;if(this.vrpLeaflet&&this.vrpLeaflet.isInitialized&&this.problem){if(console.log("VrpSolutionDetailComponent -> openSolution -> this.mSolution",this.mSolution),this.solIndex>=0&&this.problem.solutions[this.solIndex]){var e,n=this.problem.solutions[this.solIndex];this.vrpLeaflet&&this.mSolution!==n&&(this.mSolution=n,this.routeListSettings.title=this.mSolution.id,this.routeListSettings.summaryText="Total Cost: $"+this.mSolution.costs.toFixed(1)+", "+(this.mSolution.distance/1e3).toFixed(1)+" km",this._updateSolutionIdUnassignedJobs(),this.mRoutes=this.mSolution.routes.map(function(e,n){return t._createRoute(e,"R_"+e.vehicle_id+"_"+n)})),this.routeIndex<0?(this.mRoute=void 0,this.vrpLeaflet.highlightOff(),this.navData=this.mRoutes,this.navSettings=this.routeListSettings):(this.mRoute=this.mRoutes[this.routeIndex],this.mRoute.checked=!0,this.legends[1].checked=!0,this.mRoute.highlight(),this.mRoute.markers.forEach(function(t){t._subHeader=e&&e.getAddress().id===t.getAddress().id&&e.jobType===t.jobType?void 0:t.jobType.toUpperCase()+" at "+t.getTextAddress(),e=t}),this.navData=this.mRoute.markers,this.actListSettings.title=this.mRoute.tags.vehicle_id,this.actListSettings.summaryText=this.mRoute.tags&&"Distance: "+(this.mRoute.tags.distance/1e3).toFixed(1)+" km, start at "+o(this.mRoute.tags.start_time,"HH:mm")+", end at  "+o(this.mRoute.tags.end_time,"HH:mm"),this.navSettings=this.actListSettings),this.legends[0].disabled=!1,this.legends[1].disabled=!1,this._visualize()}else this._removeAllRoutes(),this.navData=this.problem.solutions,this.navSettings=this.solutionListSettings,this.mSolution=void 0,this.mRoutes=void 0,this.mRoute=void 0,this.legends[0].disabled=!0,this.legends[1].disabled=!0,this._visualize();this.onSolutionOpened.emit(this.mSolution)}},t.prototype.onRouteSelected=function(t,e){var n=[t,t.vehicleMarker].concat(t.markers);this._visualize(n),t.checked&&!e&&t.highlight()},t.prototype.optimizeWithDialog=function(t,e,n,i,l,o){var r=this;void 0===l&&(l={}),void 0===o&&(o=void 0),0===t.length?this._dialog.alert("There are no pending orders"):0===e.length?this._dialog.alert("There are no usable vehicles to assign orders to"):this._dialog.openWithConfig(h.a,{maxWidth:"100vw",maxHeight:"100vh",data:{selectableOrders:t,selectableVehicles:e,problem:this.problem,initialSol:n,turnOverTime:i,config:l}}).subscribe(function(t){t&&(t.isSaved=!0,t.usergroup=o,r.optimize(t))})},t.prototype.optimize=function(t){var e=this;console.log("VrpSolutionDetailComponent -> optimize -> options",t);var n=new s.a,i=this._dialog.openLoadingSnackBar(n);n.next("Optimizing ..."),this._socket.onJSON("msg",function(t){if(console.log("VrpSolutionDetailComponent -> optimize -> msg",t),t.data&&t.data[0]){var e="Optimizing: "+t.data[0].replace(/[^a-z0-9: \/]/gi,"");n.next(e)}});var l=this._problemRest.optimize(this.problem._id,t).pipe(Object(u.a)(function(){i.dismiss(),e._socket.removeListener("msg")})).subscribe(function(t){if(t&&0!==t.routes.length?e.onOptimizationEnd.emit(t):e._dialog.alert("OPTIMIZATION_ERROR_ALERT"),t){var n=e.problem.solutions.findIndex(function(e){return e.id===t.id});n>-1?e.problem.solutions.splice(n,1,t):e.problem.solutions.push(t),e.navList.filter()}},function(t){return e._dialog.closeAll().errorResponse(t)});i.onAction().subscribe(function(){l.unsubscribe(),e._dialog.alert("SOLUTION_DETAIL.OPTIMIZATION_CANCELLED_ALERT")})},t.prototype._renameSolution=function(t){var e=this;this._dialog.prompt(t.id).subscribe(function(n){if(n){var i=t.id;t.id=n,e._problemRest.updateItem(e.problem._id,"solutions",i,t).subscribe(function(){e._toast.shortAlert("Renamed succesfully")},function(t){return e._dialog.errorResponse(t)})}})},t.prototype._importSolution=function(t){var e=this;void 0===t&&(t="json"),this._file.open({accept:t,type:"text"},function(t){try{var n=JSON.parse(t);e.problem.solutions.push(n),e.navList.filter(),e._toast.shortAlert("SOLUTION_DETAIL.IMPORT_SUCCESS_MSG")}catch(t){e._dialog.error(t,"INVALID_FILE_FORMAT_ERR")}})},t.prototype._exportSolution=function(t,e){if(void 0===e&&(e="json"),"json"===e)this._file.saveAsJson(t,t.id+".json");else if("xlsx"===e){var n=this._excel.addCSVToWorkbook(void 0,this.problem.exportSolSummaryToCSV(t),"Solution",[30,20,15,15,15,7,20,20,20]);this._excel.addCSVToWorkbook(n,this.problem.exportAllRoutesToCSV(t.routes),"Routes",[9,20,7,13,13,12,12,7,50,30,15,15]),this._excel.saveWorkbookToFile(n,t.id+".xlsx")}},t.prototype._deleteSelectedSol=function(){var t=this.problem.solutions.filter(function(t){return t.checked});this._deleteItems(t)},t.prototype._deleteItems=function(t){var e=this;t.length>0&&this._dialog.confirm("SOLUTION_DETAIL.DELETE_PROCESS_CONFIRM_ALERT").subscribe(function(n){n&&e._problemRest.deleteItems(e.problem._id,"solutions",t.map(function(t){return t.id})).subscribe(function(n){console.log("_deleteItems -> answer",n);var i=Object(r.a)(e.navData,function(e){return t.includes(e)});i.length>0&&e.navList.filter(),e._toast.shortAlert(i.length+" records has been deleted")},function(t){return e._dialog.errorResponse(t)})})},t.prototype._visualizeVehicles=function(){var t=this.vrpLeaflet.select(function(t){return t instanceof p.a});this._visualize(t)},t.prototype._visualizeAssignedJobs=function(){var t=this.vrpLeaflet.select(function(t){return t instanceof c&&!t.isUnassignedJob()});this._visualize(t)},t.prototype._visualizeUnassignedJobs=function(){var t=this.vrpLeaflet.select(function(t){return t instanceof c&&t.isUnassignedJob()});this._visualize(t)},t.prototype._visualize=function(t){var e=this;void 0===t&&(t=void 0);var n=t||this.vrpLeaflet.select({}),i=this.mRoute?[this.mRoute.id]:this.mRoutes?this.mRoutes.filter(function(t){return t.checked}).map(function(t){return t.id}):[],l=n.filter(function(t){return t instanceof c?!!e.legends[t.isUnassignedJob()?2:1].checked&&(!!t.isUnassignedJob()||i.includes(t.routeId)):t instanceof p.a?e.legends[0].checked&&i.includes(t.routeId):t instanceof d.a&&(e.mRoute?e.mRoute===t:t.checked)});if(this.mSolution&&this.mSolution.id){var o=this.vrpLeaflet.select(function(t){return t instanceof c&&!t.isSelectedSolutionJob(e.mSolution.id)});l=l.filter(function(t){return!o.includes(t)})}var r=n.filter(function(t){return!l.includes(t)});this.vrpLeaflet.showLayers(l),this.vrpLeaflet.hideLayers(r)},t.prototype._updateSolutionIdUnassignedJobs=function(){var t=this;this.mSolution.unassigned_jobs.length>0&&this.mSolution.unassigned_jobs.forEach(function(e){["pickup","delivery"].forEach(function(n){var i=t.vrpLeaflet.get(e+"_"+n);i&&(i.solutionId=t.mSolution.id,i.updateMarker())})})},t}()},RusP:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("sA4U"),l=n("67Y/"),o=n("uqu0"),r=n("CcnG"),u=n("t/Na"),s=function(){function t(t,e){this._http=t,this._baseUrl=e,i.b.http=this._http}return t.prototype.get=function(t,e){return void 0===e&&(e=!1),i.b.get(this._baseUrl+"/v2/p-"+t,e).pipe(Object(l.a)(function(t){return new o.a(t)}))},t.prototype.update=function(t,e){return this._http.patch(this._baseUrl+"/v2/"+t+"/update",{update:e}).pipe(Object(l.a)(function(t){return new o.a(t)}))},t.prototype.updateField=function(t,e,n){return this._http.post(this._baseUrl+"/v2/"+t+"/"+e,n).pipe(Object(l.a)(function(t){return new o.a(t)}))},t.prototype.create=function(t){return this._http.post(this._baseUrl+"/v2/",t).pipe(Object(l.a)(function(t){return new o.a(t)}))},t.prototype.delete=function(t){return this._http.post(this._baseUrl+"/v2/destroy",{ids:t})},t.prototype.getAbstractProblem=function(t){return void 0===t&&(t=!1),i.b.get(this._baseUrl+"/v2/abstract",t)},t.prototype.geocode=function(t,e,n,i){void 0===e&&(e="onemap"),void 0===n&&(n="user,gmap,bdmap"),void 0===i&&(i=!0);var r=this._baseUrl+"/v2/geocode/"+t+"?service="+e+"&alternativeServices="+n+"&saveToDb="+i;return console.log("VrpProblemRestService -> url",r),this._http.post(r,{}).pipe(Object(l.a)(function(t){return new o.a(t)}))},t.prototype.queryDistanceMatrix=function(t){return this._http.get(this._baseUrl+"/v2/distanceMatrix/"+t)},t.prototype.optimize=function(t,e){return this._http.post(this._baseUrl+"/v2/optimize/"+t,e)},t.prototype.deleteItems=function(t,e,n){var i,r=((i={})[""+e]={id:{$in:n}},i);return this._http.patch(this._baseUrl+"/v2/"+t+"/remove",{update:r}).pipe(Object(l.a)(function(t){return new o.a(t)}))},t.prototype.updateItem=function(t,e,n,i){var r,u,s=((r={})[e+".id"]=n,r),a=((u={})[e+".$"]=i,u);return this._http.patch(this._baseUrl+"/v2/"+t+"/update",{query:s,update:a}).pipe(Object(l.a)(function(t){return new o.a(t)}))},t.ngInjectableDef=r.Y({factory:function(){return new t(r.Ca(u.c),r.Ca("PROBLEM_REST_BASE_URL"))},token:t,providedIn:"root"}),t}()},giEZ:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n("mrSG"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.__extends)(e,t),e}(n("S0mB").a)},kG9y:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){}},q6FN:function(t,e,n){"use strict";var i=n("CcnG"),l=n("Ip0R"),o=n("MNZv"),r=function(){function t(){}return t.prototype.transform=function(t,e){return"chinh"===t?"HI":"MA"},t}(),u=n("r8Is"),s=n("c4Wm"),a=n("Nsh5"),c=n("Fzqc"),d=n("wFw1"),p=n("lLAP"),h=n("dWZg"),m=n("f4TD"),b=n("N1KZ"),f=n("G1cW"),g=n("xrix"),v=n("+gH2"),_=n("2Q+G"),x=n("mVsa"),S=n("Mr+X"),y=n("SMsm");n("OcP3"),n("giEZ"),n("ZYCi"),n("eDjj"),n("2Usm"),n("RusP"),n("Z/yy"),n("D8hx"),n.d(e,"a",function(){return I}),n.d(e,"b",function(){return A});var I=i.Va({encapsulation:0,styles:[[".popupMsgLine[_ngcontent-%COMP%]{word-wrap:break-word}"]],data:{}});function k(t){return i.rb(0,[(t()(),i.Xa(0,0,null,null,1,"i",[["class","tc-blue-900"]],null,null,null,null,null)),(t()(),i.pb(-1,null,["(Approved)"]))],null,null)}function T(t){return i.rb(0,[(t()(),i.Xa(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.pb(1,null,["/",""]))],null,function(t,e){t(e,1,0,e.parent.context.item.no_total_orders)})}function L(t){return i.rb(0,[(t()(),i.Xa(0,0,null,null,18,"span",[],null,null,null,null,null)),(t()(),i.pb(1,null,[""," "])),i.lb(2,2),(t()(),i.Oa(16777216,null,null,1,null,k)),i.Wa(4,16384,null,0,l.m,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(t()(),i.Xa(5,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i.Xa(6,0,null,null,2,"span",[["class","tc-red-700"]],null,null,null,null,null)),(t()(),i.pb(7,null,["",""])),i.lb(8,1),(t()(),i.Xa(9,0,null,null,1,"span",[["class","tc-blue-700"]],null,null,null,null,null)),(t()(),i.pb(10,null,[", "," route(s)"])),(t()(),i.Xa(11,0,null,null,4,"span",[["class","tc-purple-700"]],null,null,null,null,null)),(t()(),i.pb(12,null,[", ",""])),(t()(),i.Oa(16777216,null,null,1,null,T)),i.Wa(14,16384,null,0,l.m,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(t()(),i.pb(-1,null,[" unassigned"])),(t()(),i.pb(16,null,[", used ",", "," "])),i.lb(17,1),i.lb(18,1)],function(t,e){t(e,4,0,e.context.item.approved),t(e,14,0,e.context.item.no_total_orders)},function(t,e){t(e,1,0,i.qb(e,1,0,t(e,2,0,i.hb(e.parent,0),null==e.context.item?null:e.context.item.id,30))),t(e,7,0,i.qb(e,7,0,t(e,8,0,i.hb(e.parent,1),null==e.context.item?null:e.context.item.distance))),t(e,10,0,null==e.context.item?null:e.context.item.routes.length),t(e,12,0,null==e.context.item?null:e.context.item.no_unassigned_jobs),t(e,16,0,i.qb(e,16,0,t(e,17,0,i.hb(e.parent,2),null==e.context.item?null:e.context.item.engine)),i.qb(e,16,1,t(e,18,0,i.hb(e.parent,3),null==e.context.item?null:e.context.item.calc_date)))})}function R(t){return i.rb(0,[(t()(),i.Xa(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.pb(1,null,["(",")"]))],null,function(t,e){t(e,1,0,e.parent.context.item.tags.driver_name)})}function O(t){return i.rb(0,[(t()(),i.Xa(0,0,null,null,1,"span",[],[[4,"color",null]],null,null,null,null)),(t()(),i.pb(1,null,["",""])),(t()(),i.pb(-1,null,["\xa0 "])),(t()(),i.Oa(16777216,null,null,1,null,R)),i.Wa(4,16384,null,0,l.m,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(t()(),i.Xa(5,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i.Xa(6,0,null,null,2,"strong",[],null,null,null,null,null)),(t()(),i.pb(7,null,["",""])),i.lb(8,1),(t()(),i.pb(9,null,[" - "," to ",""])),i.lb(10,2),i.lb(11,2),(t()(),i.Xa(12,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i.Xa(13,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i.pb(-1,null,["Load"])),(t()(),i.pb(15,null,[": ","/",",\xa0 "])),(t()(),i.Xa(16,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i.pb(-1,null,["Jobs"])),(t()(),i.pb(18,null,[": ","/","\n"]))],function(t,e){t(e,4,0,e.context.item.tags.driver_name)},function(t,e){t(e,0,0,e.context.item.color),t(e,1,0,e.context.item.tags.vehicle_id),t(e,7,0,i.qb(e,7,0,t(e,8,0,i.hb(e.parent,1),e.context.item.tags.distance))),t(e,9,0,i.qb(e,9,0,t(e,10,0,i.hb(e.parent,4),e.context.item.tags.start_time,"HH:mm")),i.qb(e,9,1,t(e,11,0,i.hb(e.parent,4),e.context.item.tags.end_time,"HH:mm"))),t(e,15,0,e.context.item.tags.act[0].load_before,e.context.item.tags.vehicle_capacity),t(e,18,0,e.context.item.markers.length,e.context.item.tags.max_num_job||"-")})}function w(t){return i.rb(0,[(t()(),i.pb(-1,null,[" Order "])),(t()(),i.Xa(1,0,null,null,1,"a",[["href","javascript:;"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onJobDetailsOpened.emit(t.context.item.tags.id)&&i),i},null,null)),(t()(),i.pb(2,null,["#",""])),(t()(),i.Xa(3,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i.Xa(4,0,null,null,8,"span",[],null,null,null,null,null)),(t()(),i.pb(-1,null,[" arrives "])),(t()(),i.Xa(6,0,null,null,2,"span",[["class","tc-red-500"]],null,null,null,null,null)),(t()(),i.pb(7,null,["",""])),i.lb(8,2),(t()(),i.pb(-1,null,[" leave "])),(t()(),i.Xa(10,0,null,null,2,"span",[["class","tc-red-500"]],null,null,null,null,null)),(t()(),i.pb(11,null,["",""])),i.lb(12,2)],null,function(t,e){t(e,2,0,e.context.item.tags.id),t(e,7,0,i.qb(e,7,0,t(e,8,0,i.hb(e.parent,4),null==e.context.item.arrivalTime?null:e.context.item.arrivalTime.start,"HH:mm"))),t(e,11,0,i.qb(e,11,0,t(e,12,0,i.hb(e.parent,4),null==e.context.item.arrivalTime?null:e.context.item.arrivalTime.end,"HH:mm")))})}function A(t){return i.rb(0,[i.jb(0,o.b,[]),i.jb(0,o.a,[]),i.jb(0,r,[]),i.jb(0,u.b,[]),i.jb(0,l.e,[i.x]),i.nb(402653184,1,{vrpLeaflet:0}),i.nb(402653184,2,{navList:0}),i.nb(402653184,3,{solutionItemTemplate:0}),i.nb(402653184,4,{routeItemTemplate:0}),i.nb(402653184,5,{actItemTemplate:0}),(t()(),i.Xa(10,0,null,null,10,"mat-sidenav-container",[["class","mat-drawer-container mat-sidenav-container"],["layout-fill",""]],[[2,"mat-drawer-container-explicit-backdrop",null]],null,null,s.c,s.b)),i.Wa(11,1490944,null,2,a.f,[[2,c.c],i.l,i.C,i.i,a.a,[2,d.a]],null,null),i.nb(603979776,6,{_drawers:1}),i.nb(335544320,7,{_content:0}),(t()(),i.Xa(14,0,null,0,3,"mat-sidenav",[["class","mat-drawer mat-sidenav"],["mode","side"],["opened","true"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"]],[["component","@transform.start"],["component","@transform.done"]],function(t,e,n){var l=!0;return"component:@transform.start"===e&&(l=!1!==i.hb(t,15)._onAnimationStart(n)&&l),"component:@transform.done"===e&&(l=!1!==i.hb(t,15)._onAnimationEnd(n)&&l),l},s.d,s.a)),i.Wa(15,3325952,[[6,4],["sidenav",4]],0,a.e,[i.l,p.i,p.h,h.a,i.C,[2,l.d]],{mode:[0,"mode"],opened:[1,"opened"]},null),(t()(),i.Xa(16,0,null,0,1,"vrp-nav-list",[],null,null,null,m.b,m.a)),i.Wa(17,638976,[[2,4],["navList",4]],0,b.a,[],{data:[0,"data"],settings:[1,"settings"]},null),(t()(),i.Xa(18,0,null,2,2,"div",[["layout-fill",""]],null,null,null,null,null)),(t()(),i.Xa(19,0,null,null,1,"vrp-leaflet",[],null,null,null,f.b,f.a)),i.Wa(20,4243456,[[1,4],["leafletMap",4]],0,g.a,[v.a],{legends:[0,"legends"],clusteringMode:[1,"clusteringMode"]},null),(t()(),i.Oa(0,[[3,2],["solutionItemTemplate",2]],null,0,null,L)),(t()(),i.Oa(0,[[4,2],["routeItemTemplate",2]],null,0,null,O)),(t()(),i.Oa(0,[[5,2],["actItemTemplate",2]],null,0,null,w)),(t()(),i.Xa(24,0,null,null,22,"mat-menu",[],null,null,null,_.d,_.a)),i.Wa(25,1294336,[["menuActList",4]],2,x.c,[i.l,i.C,x.a],{overlapTrigger:[0,"overlapTrigger"]},null),i.nb(603979776,8,{items:1}),i.nb(335544320,9,{lazyContent:0}),i.mb(2048,null,x.h,null,[x.c]),(t()(),i.Xa(29,0,null,0,5,"a",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i.hb(t,30)._checkDisabled(n)&&l),"mouseenter"===e&&(l=!1!==i.hb(t,30)._handleMouseEnter()&&l),l},_.c,_.b)),i.Wa(30,180224,[[8,4]],0,x.d,[i.l,l.d,p.h,[2,x.h]],null,null),(t()(),i.Xa(31,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,S.b,S.a)),i.Wa(32,638976,null,0,y.a,[i.l,y.c,[8,null]],null,null),(t()(),i.pb(-1,0,["edit"])),(t()(),i.pb(-1,0,["Change vehicle"])),(t()(),i.Xa(35,0,null,0,5,"a",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i.hb(t,36)._checkDisabled(n)&&l),"mouseenter"===e&&(l=!1!==i.hb(t,36)._handleMouseEnter()&&l),l},_.c,_.b)),i.Wa(36,180224,[[8,4]],0,x.d,[i.l,l.d,p.h,[2,x.h]],null,null),(t()(),i.Xa(37,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,S.b,S.a)),i.Wa(38,638976,null,0,y.a,[i.l,y.c,[8,null]],null,null),(t()(),i.pb(-1,0,["edit"])),(t()(),i.pb(-1,0,["Send to driver"])),(t()(),i.Xa(41,0,null,0,5,"a",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i.hb(t,42)._checkDisabled(n)&&l),"mouseenter"===e&&(l=!1!==i.hb(t,42)._handleMouseEnter()&&l),l},_.c,_.b)),i.Wa(42,180224,[[8,4]],0,x.d,[i.l,l.d,p.h,[2,x.h]],null,null),(t()(),i.Xa(43,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,S.b,S.a)),i.Wa(44,638976,null,0,y.a,[i.l,y.c,[8,null]],null,null),(t()(),i.pb(-1,0,["delete"])),(t()(),i.pb(-1,0,["Delete"]))],function(t,e){var n=e.component;t(e,11,0),t(e,15,0,"side","true"),t(e,17,0,n.navData,n.navSettings),t(e,20,0,n.legends,!1),t(e,25,0,!1),t(e,32,0),t(e,38,0),t(e,44,0)},function(t,e){t(e,10,0,i.hb(e,11)._backdropOverride),t(e,14,0,i.hb(e,15)._animationState,null,"end"===i.hb(e,15).position,"over"===i.hb(e,15).mode,"push"===i.hb(e,15).mode,"side"===i.hb(e,15).mode,i.hb(e,15).fixedInViewport,i.hb(e,15).fixedInViewport?i.hb(e,15).fixedTopGap:null,i.hb(e,15).fixedInViewport?i.hb(e,15).fixedBottomGap:null),t(e,29,0,i.hb(e,30)._highlighted,i.hb(e,30)._triggersSubmenu,i.hb(e,30)._getTabIndex(),i.hb(e,30).disabled.toString(),i.hb(e,30).disabled||null),t(e,31,0,i.hb(e,32).inline),t(e,35,0,i.hb(e,36)._highlighted,i.hb(e,36)._triggersSubmenu,i.hb(e,36)._getTabIndex(),i.hb(e,36).disabled.toString(),i.hb(e,36).disabled||null),t(e,37,0,i.hb(e,38).inline),t(e,41,0,i.hb(e,42)._highlighted,i.hb(e,42)._triggersSubmenu,i.hb(e,42)._getTabIndex(),i.hb(e,42).disabled.toString(),i.hb(e,42).disabled||null),t(e,43,0,i.hb(e,44).inline)})}}}]);